<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battery Tracking</title>
</head>
<body>
    <form>
        <label for="batteryid">Battery ID:</label>
        <input type="number" id="Batteryid" name="Batteryid" required><br><br>
        <label for="data">Date:</label>
        <input type="date" id="date" name="date" required><br><br>
        <label for="in-out">in/out</label>
        <input type="radio" id="in" name="in-out" value="in" required>
        <label for="in">In</label>
        <input type="radio" id="out" name="in-out" value="out" required>
        <label for="out">Out</label><br><br>
        <label for="staus">Status:</label>
        <select id="status" name="status" required>
            <option value="good">Good</option>
            <option value="fair">Fair</option>
            <option value="bad">Bad</option>
        </select><br><br>
        <label for="chargelevel">Charge Level:</label>
        <input type="number" min="0" max="200" id="chargelevel" name="chargelevel" required><br><br>
        <label for="v0">v0:</label>
        <input type="number" step="any"id="volt0" name="v0" required>
        <label for="amp0">@</label>x`
        <input type="number" step="any"id="amp0" name="amp0" required>
        <label for="amp0">Amp(s)</label><br><br>
        <label for="v1">v1:</label>
        <input type="number" step="any"id="volt1" name="v1" required>
        <label for="amp1">@</label>
        <input type="number" step="any"id="amp1" name="amp1" required>
        <label for="amp1">Amp(s)</label><br><br>
        <label for="v2">v2:</label>
        <input type="number" step="any"id="volt2" name="v2" required>
        <label for="amp2">@</label>
        <input type="number" step="any"id="amp2" name="amp2" required>
        <label for="amp2">Amp(s)</label><br><br>
        <label for="rint">Rint:</label>
        <input type="number" step="any"id="rint" name="rint" required>
        <label for="rint">Ohms</label><br><br>
        <button type="submit">submit</button>
        <hr>
        <div id="battery-data-display"></div>
    </form>
    <style></style>
    <script>
        const form = document.querySelector('form');
        const storage = window.localStorage;
        let batteries = [];
        if(storage.getItem('batteries')){
            batteries = JSON.parse(storage.getItem('batteries'));
        }
        form.addEventListener("submit", function(event){
            event.preventDefault();
            let battery = {};
            data = new FormData(form);
            for (const [key, value] of data.entries()) {
                battery[key] = value;
            }
            batteries.push(battery);
            storage.setItem('batteries', JSON.stringify(batteries));
            form.reset();
            console.log(batteries);
            displayData();
        })
        function displayData(){
            const display = document.querySelector('#battery-data-display');
            display.innerHTML = '';
            batteries.forEach(battery => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <p>Battery ID: ${battery.Batteryid}</p>
                    <p>In/Out: ${battery['in-out']}</p>
                    <p>Status: ${battery.status}</p>
                    <p>Charge Level: ${battery.chargelevel}</p>
                    <p>V0: ${battery.v0}V @ ${battery.amp0}A</p>
                    <p>V1: ${battery.v1}V @ ${battery.amp1}A</p>
                    <p>V2: ${battery.v2}V @ ${battery.amp2}A</p>
                    <p>Rint: ${battery.rint}Ohms</p>
                    <hr>
                `;
                display.appendChild(div);
            })
        }
        displayData();
    </script>
</body>
</html>